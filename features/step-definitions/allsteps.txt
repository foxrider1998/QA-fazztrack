const { Given, When, Then } = require('@wdio/cucumber-framework');

const LoginPage = require('../pageobjects/login.page');
const SecurePage = require('../pageobjects/secure.page');
const HomePage = require('../pageobjects/home_page');
const pageobjects = {
    login: LoginPage,
    home : HomePage
}

Given(/^I am on the /, async () => {

    await LoginPage.index()
});

When(/^I login with (\w+) and (.+)$/, async (username, password) => {
    await LoginPage.login(username, password)
});


Then(/^I should see a flash message saying (.*)$/, async (message) => {
    await HomePage.username.waitForDisplayed();
    console.log("pesan = "+ await HomePage.username.getText());
    await expect(await HomePage.username.getText()).toHaveTextContaining(message);
    // await expect(SecurePage.flashAlert).toBeExisting();
    // await expect(SecurePage.flashAlert).toHaveTextContaining(message);
});

When(/^I logout$/, async () => {
    await HomePage.actionLogout()
});



When(/^I choose laptop category$/, async () => {
    await HomePage.openCategorie();
});

When(/^I choose vaio i5$/, async () => {
    await HomePage.vaioi5();
});

When(/^I choose add to cart$/, async () => {
    await HomePage.addToCart();
});

When('I am accepts Alert', async() => {
    await browser.pause(1000);
    await browser.acceptAlert();
    await browser.pause(1000); 
})

When(/^I choose cart$/, async () => {
    await HomePage.viewMyCart();
    await browser.pause(2000);

});

When(/^I delete first item$/, async () => {
    await HomePage.deleteFirstItem();
    await browser.pause(2000);

});


Then(/^I get welcome arisss(.*)$/, async (message) => {
    await HomePage.verifyLoginSuccess(message)
});